<!DOCTYPE html>
<html lang="en">
  <head>
    <title>  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
           Docs
        </a>
         (17% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/apparata/CLIKit">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html"> Reference</a>
      <img class="carat" src="img/carat.png" />
        Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes.html#/s:6CLIKit9BasicREPLC">BasicREPL</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/CommandFlag.html">CommandFlag</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/CommandLineHistory.html">CommandLineHistory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/CommandLineParser.html">CommandLineParser</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/CommandOption.html">CommandOption</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/CommandOptionalInput.html">CommandOptionalInput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/CommandRequiredInput.html">CommandRequiredInput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/CommandUsage.html">CommandUsage</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/CommandVariadicInput.html">CommandVariadicInput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Console.html">Console</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Environment.html">Environment</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ExecutableFinder.html">ExecutableFinder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Execution.html">Execution</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Execution/SignalType.html">– SignalType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ExecutionMode.html">ExecutionMode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/LineReader.html">LineReader</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/ReadEvaluatePrintLoop.html">ReadEvaluatePrintLoop</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SimpleWordCompletion.html">SimpleWordCompletion</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/StandardBaseOutput.html">StandardBaseOutput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes.html#/s:6CLIKit13StandardErrorC">StandardError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/StandardIO.html">StandardIO</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/StandardInput.html">StandardInput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes.html#/s:6CLIKit14StandardOutputC">StandardOutput</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Subprocess.html">Subprocess</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Subprocess/State.html">– State</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SubprocessResult.html">SubprocessResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Terminal.html">Terminal</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TerminalInputMode.html">TerminalInputMode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TerminalInputMode/Mode.html">– Mode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TerminalREPL.html">TerminalREPL</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Global Variables.html">Global Variables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Global Variables.html#/enabledLogLevels">enabledLogLevels</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Global Variables.html#/s:6CLIKit16enabledLogLevelsAA07EnabledcD0Vvp">enabledLogLevels</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Global Variables.html#/s:6CLIKit9moduleLogSo9OS_os_logCSgvp">moduleLog</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/CommandInputType.html">CommandInputType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/CommandLineError.html">CommandLineError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/ReadEvaluatePrintLoopError.html">ReadEvaluatePrintLoopError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/ReadEvaluatePrintLoopResult.html">ReadEvaluatePrintLoopResult</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/StandardEnvironmentVariable.html">StandardEnvironmentVariable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/SubprocessError.html">SubprocessError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TerminalCode.html">TerminalCode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TerminalCode/ExtendedColor.html">– ExtendedColor</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TerminalInputModeError.html">TerminalInputModeError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TerminalType.html">TerminalType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Array.html">Array</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Character.html">Character</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Dictionary.html">Dictionary</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Double.html">Double</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Float.html">Float</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Float80.html">Float80</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Int.html">Int</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Int16.html">Int16</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Int32.html">Int32</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Int64.html">Int64</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Int8.html">Int8</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Optional.html">Optional</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Regex.html">Regex</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Set.html">Set</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UInt.html">UInt</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UInt16.html">UInt16</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UInt32.html">UInt32</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UInt64.html">UInt64</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UInt8.html">UInt8</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/URL.html">URL</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:6CLIKit1poiyAA4PathVAD_ADtF">+(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:6CLIKit1poiyAA4PathVAD_SStF">+(_:_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Command.html">Command</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CommandArgumentSpecification.html">CommandArgumentSpecification</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CommandArgumentValue.html">CommandArgumentValue</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CommandFlagSpecification.html">CommandFlagSpecification</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CommandInputSpecification.html">CommandInputSpecification</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/CommandOptionSpecification.html">CommandOptionSpecification</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Commands.html">Commands</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/IO.html">IO</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Input.html">Input</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Output.html">Output</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TextCompletion.html">TextCompletion</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/WrapsFileHandle.html">WrapsFileHandle</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/EnabledLogLevels.html">EnabledLogLevels</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Path.html">Path</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TerminalString.html">TerminalString</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TerminalString/Fragment.html">– Fragment</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TerminalString/StringInterpolation.html">– StringInterpolation</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <h1 id='clikit' class='heading'>CLIKit</h1>

<p><a href="https://swift.org/package-manager/"><img src="https://img.shields.io/badge/SwiftPM-compatible-4BC51D.svg?style=flat" alt="SwiftPM compatible"></a> <img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="MIT License"> <img src="https://img.shields.io/badge/language-Swift%205.1-orange.svg" alt="language Swift 5.1"> <img src="https://img.shields.io/badge/platform-macOS-lightgrey.svg" alt="platform macOS"></p>

<p>The CLIKit framework contains various convenient utilities for making it easier to write
command line tools in Swift.</p>
<h2 id='license' class='heading'>License</h2>

<p>CLIKit is released under the MIT license. See <code>LICENSE</code> file for more detailed information.</p>
<h1 id='table-of-contents' class='heading'>Table of Contents</h1>

<ul>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#reference-documentation">Reference Documentation</a></li>
<li><a href="#features">Features</a>

<ul>
<li><a href="#command-line-parser">Command Line Parser</a></li>
<li><a href="#subprocesses">Subprocesses</a></li>
<li><a href="#terminal-output">Terminal Output</a></li>
<li><a href="#execution">Execution</a></li>
<li><a href="#read-evaluate-print-loop">Read Evaluate Print Loop</a></li>
<li><a href="#path-management">Path Management</a></li>
</ul></li>
</ul>
<h1 id='getting-started' class='heading'>Getting Started</h1>

<p>Add CLIKit to your Swift package by adding the following to your <code>Package.swift</code> file in
the dependencies array:</p>
<pre class="highlight swift"><code><span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/apparata/CLIKit.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"0.1.0"</span><span class="p">)</span>
</code></pre>

<p>If you are using Xcode 11 or newer, you can add CLIKit by entering the URL to the
repository via the <code>File</code> menu:</p>
<pre class="highlight plaintext"><code>File &gt; Swift Packages &gt; Add Package Dependency...
</code></pre>

<p><strong>Note:</strong> CLIKit requires <strong>Swift 5.1</strong> or later.</p>
<h1 id='reference-documentation' class='heading'>Reference Documentation</h1>

<p>There is generated <a href="https://apparata.github.io/CLIKit/CLIKit/">reference documentation</a>
available.</p>
<h1 id='features' class='heading'>Features</h1>

<p>The following sections contain some rudimentary information about the most prominent
features in CLIKit, along with examples.</p>
<h2 id='command-line-parser' class='heading'>Command Line Parser</h2>

<p>Example of a command definition:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">FibonacciCommand</span><span class="p">:</span> <span class="kt">Command</span> <span class="p">{</span>

    <span class="k">let</span> <span class="nv">description</span> <span class="o">=</span> <span class="s">"Calculate fibonacci numbers"</span>

    <span class="kd">@CommandFlag(short: "v", description: "Prints verbose output")</span>
    <span class="k">var</span> <span class="nv">verbose</span><span class="p">:</span> <span class="kt">Bool</span>

    <span class="kd">@CommandOption(short: "i", default: 5, regex: #"^\d+$"#,
                   description: "Number of iterations to perform.")</span>
    <span class="k">var</span> <span class="nv">iterations</span><span class="p">:</span> <span class="kt">Int</span>

    <span class="kd">func</span> <span class="nf">run</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">iterations</span><span class="p">,</span> <span class="nv">printSteps</span><span class="p">:</span> <span class="n">verbose</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Result: </span><span class="se">\(</span><span class="n">result</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Example of running the parser on the executable arguments and then running the
command handler after the command has been parsed:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">command</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">CommandLineParser</span><span class="p">()</span><span class="o">.</span><span class="nf">parse</span><span class="p">(</span><span class="kt">FibonacciCommand</span><span class="p">())</span>
<span class="k">try</span> <span class="n">command</span><span class="o">.</span><span class="nf">run</span><span class="p">()</span>
</code></pre>

<p>If the binary is called <code>fibonacci</code>, the command can be run like this in a shell:</p>
<pre class="highlight shell"><code><span class="nv">$ </span>fibonacci <span class="nt">-i</span> 4
</code></pre>

<p>Several commands can be grouped together as subcommands:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">MathCommand</span><span class="p">:</span> <span class="kt">Commands</span> <span class="p">{</span>

    <span class="k">let</span> <span class="nv">description</span> <span class="o">=</span> <span class="s">"Perform math operations"</span>

    <span class="k">let</span> <span class="nv">fibonacci</span> <span class="o">=</span> <span class="kt">FibonacciCommand</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">factorize</span> <span class="o">=</span> <span class="kt">FactorizeCommand</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">sum</span> <span class="o">=</span> <span class="kt">SumCommand</span><span class="p">()</span>
<span class="p">}</span>
</code></pre>

<p>Example of running the parser on the executable arguments and then runing the
command handler after the command has been parsed:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">command</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">CommandLineParser</span><span class="p">()</span><span class="o">.</span><span class="nf">parse</span><span class="p">(</span><span class="kt">MathCommand</span><span class="p">())</span>
<span class="k">try</span> <span class="n">command</span><span class="o">.</span><span class="nf">run</span><span class="p">()</span>
</code></pre>

<p>If the binary is called <code>math</code>, the <code>fibonacci</code> subcommand can be run like this in a shell:</p>
<pre class="highlight shell"><code><span class="nv">$ </span>math fibonacci <span class="nt">-i</span> 4
</code></pre>
<h2 id='subprocesses' class='heading'>Subprocesses</h2>

<p>Example of launching a subprocess and capturing its output:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">CLIKit</span>

<span class="c1">// Search for Swift using PATH environment variable.</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">path</span> <span class="o">=</span> <span class="kt">ExecutableFinder</span><span class="o">.</span><span class="nf">find</span><span class="p">(</span><span class="s">"swift"</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Didn't find swift, exiting."</span><span class="p">)</span>
    <span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">do</span> <span class="p">{</span>
    <span class="c1">// Launch Swift as a subprocess and capture its output.</span>
    <span class="k">let</span> <span class="nv">subprocess</span> <span class="o">=</span> <span class="kt">Subprocess</span><span class="p">(</span><span class="nv">executable</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
                                <span class="nv">arguments</span><span class="p">:</span> <span class="p">[</span><span class="s">"-h"</span><span class="p">],</span>
                                <span class="nv">captureOutput</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
    <span class="k">try</span> <span class="n">subprocess</span><span class="o">.</span><span class="nf">spawn</span><span class="p">()</span>

    <span class="c1">// Wait for the process to finish.</span>
    <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="n">subprocess</span><span class="o">.</span><span class="nf">wait</span><span class="p">()</span>

    <span class="c1">// Print the captured output from the subprocess.</span>
    <span class="nf">print</span><span class="p">(</span><span class="k">try</span> <span class="n">result</span><span class="o">.</span><span class="nf">capturedOutputString</span><span class="p">())</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">dump</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>    
<span class="p">}</span>
</code></pre>
<h2 id='terminal-output' class='heading'>Terminal Output</h2>

<p>Example of using the <code><a href="Structs/TerminalString.html">TerminalString</a></code> struct to print a string with ANSI terminal codes:</p>
<pre class="highlight swift"><code><span class="kt">Console</span><span class="o">.</span><span class="nf">print</span><span class="p">(</span><span class="s">"</span><span class="se">\(</span><span class="o">.</span><span class="n">green</span><span class="se">)</span><span class="s">This is green.</span><span class="se">\(</span><span class="o">.</span><span class="n">reset</span><span class="se">)\(</span><span class="o">.</span><span class="n">bold</span><span class="se">)</span><span class="s">This is bold.</span><span class="se">\(</span><span class="o">.</span><span class="n">reset</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
</code></pre>

<p>If the console is a <q>dumb</q> terminal or the Xcode console, the ANSI terminal codes will be
filtered out.</p>

<p>The <code><a href="Classes/Console.html">Console</a></code> class has a few convenience methods for console input and output:</p>
<pre class="highlight swift"><code><span class="k">if</span> <span class="kt">Console</span><span class="o">.</span><span class="nf">confirmYesOrNo</span><span class="p">(</span><span class="nv">question</span><span class="p">:</span> <span class="s">"Clear the screen?"</span><span class="p">,</span> <span class="k">default</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Clear the screen.</span>
    <span class="kt">Console</span><span class="o">.</span><span class="nf">clear</span><span class="p">()</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Do not clear the screen.</span>
<span class="p">}</span>
</code></pre>
<h2 id='execution' class='heading'>Execution</h2>

<p>Command line programs usually end when there is no more code to run on the main 
thread. To do asynchronous work, such as network requests, or running code on a
dispatch queue, a runloop needs to be started. The <code>runUntilTerminated()</code> method
of the <code><a href="Classes/Execution.html">Execution</a></code> class can be used to start a runloop that will run until the program is terminated, either programmatically using <code>exit()</code> or similar, or explicitly terminated
by the system, e.g. if the user presses Ctrl-C.</p>

<p>Example:</p>
<pre class="highlight swift"><code><span class="kt">Execution</span><span class="o">.</span><span class="nf">runUntilTerminated</span><span class="p">()</span>
</code></pre>

<p>There is an optional closure parameter to handle any necessary cleanup when the
program is terminated. The closure is called if the process receives <code>SIGINT</code> (typically if 
the user presses Ctrl-C), <code>SIGHUP</code> (terminal disconnected) or <code>SIGTERM</code> (terminate).</p>

<p>Example:</p>
<pre class="highlight swift"><code><span class="kt">Execution</span><span class="o">.</span><span class="n">runUntilTerminated</span> <span class="p">{</span> <span class="n">signal</span> <span class="k">in</span> 

    <span class="k">switch</span> <span class="n">signal</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">terminate</span><span class="p">:</span>
        <span class="c1">// Do any necessary cleanup here.</span>
        <span class="o">...</span>

        <span class="c1">// Return true to allow the system to handle the SIGTERM signal.</span>
        <span class="k">return</span> <span class="kc">true</span>

    <span class="k">case</span> <span class="o">.</span><span class="nv">interrupt</span><span class="p">:</span>
        <span class="c1">// Do any necessary cleanup here.</span>
        <span class="o">...</span>

        <span class="c1">// Return false to suppress the SIGINT signal.</span>
        <span class="c1">// This will not allow Ctrl-C to terminate the program.</span>
        <span class="k">return</span> <span class="kc">false</span>
    <span class="p">}</span>

    <span class="k">case</span> <span class="o">.</span><span class="nv">terminalDisconnected</span><span class="p">:</span>
        <span class="c1">// Do any necessary cleanup here.</span>
        <span class="o">...</span>

        <span class="c1">// Return false to suppress the SIGHUP signal.</span>
        <span class="c1">// This will allow the process to run without the terminal.</span>
        <span class="k">return</span> <span class="kc">false</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h2 id='read-evaluate-print-loop' class='heading'>Read Evaluate Print Loop</h2>

<p>The <code><a href="Classes/ReadEvaluatePrintLoop.html">ReadEvaluatePrintLoop</a></code> class has a built in command line editor with support for
various common keyboard shortcuts, customizable tab completion, a command line
history, and multi-line support. If the terminal is <q>dumb</q> or a debugger is attached
(such as if you want to run in the Xcode console) it falls back to just reading buffered lines
from stdin.</p>

<p>Example:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">readEvaluatePrintLoop</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">ReadEvaluatePrintLoop</span><span class="p">()</span>

<span class="n">readEvaluatePrintLoop</span><span class="o">.</span><span class="n">textCompletion</span> <span class="o">=</span> <span class="kt">SimpleWordCompletion</span><span class="p">(</span><span class="nv">completions</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">"banana"</span><span class="p">,</span>
    <span class="s">"discombobulated"</span><span class="p">,</span>
    <span class="s">"water"</span><span class="p">,</span>
    <span class="s">"whatever"</span>
<span class="p">])</span>

<span class="k">try</span> <span class="n">readEvaluatePrintLoop</span><span class="o">.</span><span class="n">run</span> <span class="p">{</span> <span class="n">input</span> <span class="k">in</span>
    <span class="k">guard</span> <span class="o">!</span><span class="p">[</span><span class="s">"quit"</span><span class="p">,</span> <span class="s">"exit"</span><span class="p">]</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="n">input</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">.</span><span class="k">break</span>
    <span class="p">}</span>

    <span class="kt">Console</span><span class="o">.</span><span class="nf">write</span><span class="p">(</span><span class="nv">terminalString</span><span class="p">:</span> <span class="s">"You entered: </span><span class="se">\(</span><span class="n">input</span><span class="se">)\n</span><span class="s">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="o">.</span><span class="k">continue</span>
<span class="p">}</span>

</code></pre>
<h2 id='path-management' class='heading'>Path Management</h2>

<p>CLIKit contains a <code><a href="Structs/Path.html">Path</a></code> struct that makes working with file system paths easier.</p>

<p>Examples:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">absolutePath</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"/usr/bin/zip"</span><span class="p">)</span>
<span class="n">absolutePath</span><span class="o">.</span><span class="n">isAbsolute</span>
<span class="n">absolutePath</span><span class="o">.</span><span class="n">isRelative</span>

<span class="k">let</span> <span class="nv">relativePath</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"bin/whatever"</span><span class="p">)</span>
<span class="n">relativePath</span><span class="o">.</span><span class="n">isAbsolute</span>
<span class="n">relativePath</span><span class="o">.</span><span class="n">isRelative</span>

<span class="k">let</span> <span class="nv">concatenatedPath</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"/usr"</span><span class="p">)</span> <span class="o">+</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"/bin"</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">messyPath</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"//usr/../usr/local/bin/./whatever"</span><span class="p">)</span>
<span class="n">messyPath</span><span class="o">.</span><span class="n">normalized</span>

<span class="k">let</span> <span class="nv">pathFromLiteralString</span><span class="p">:</span> <span class="kt">Path</span> <span class="o">=</span> <span class="s">"/this/is/a/path"</span>
<span class="k">let</span> <span class="nv">pathFromEmptyString</span><span class="p">:</span> <span class="kt">Path</span> <span class="o">=</span> <span class="s">""</span>
<span class="k">let</span> <span class="nv">pathFromConcatenatedStrings</span><span class="p">:</span> <span class="kt">Path</span> <span class="o">=</span> <span class="s">"/usr"</span> <span class="o">+</span> <span class="s">"/bin"</span>

<span class="k">let</span> <span class="nv">pathFromComponents</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">(</span><span class="nv">components</span><span class="p">:</span> <span class="p">[</span><span class="s">"/"</span><span class="p">,</span> <span class="s">"usr/"</span><span class="p">,</span> <span class="s">"bin"</span><span class="p">,</span> <span class="s">"/"</span><span class="p">,</span> <span class="s">"swift"</span><span class="p">])</span>
<span class="k">let</span> <span class="nv">pathFromEmptyComponents</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">(</span><span class="nv">components</span><span class="p">:</span> <span class="p">[])</span>

<span class="k">let</span> <span class="nv">appendedPath</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"/usr/local"</span><span class="p">)</span><span class="o">.</span><span class="nf">appendingComponent</span><span class="p">(</span><span class="s">"bin"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">appendedPath3</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"/usr/local"</span><span class="p">)</span><span class="o">.</span><span class="nf">appending</span><span class="p">(</span><span class="kt">Path</span><span class="p">(</span><span class="s">"bin"</span><span class="p">))</span>
<span class="k">let</span> <span class="nv">appendedPath2</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"/usr/local"</span><span class="p">)</span> <span class="o">+</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"bin"</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">imagePath</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">(</span><span class="s">"photos/photo"</span><span class="p">)</span><span class="o">.</span><span class="nf">appendingExtension</span><span class="p">(</span><span class="s">"jpg"</span><span class="p">)</span>
<span class="n">imagePath</span><span class="o">.</span><span class="kd">extension</span>

<span class="k">let</span> <span class="nv">imagePathWithoutExtension</span> <span class="o">=</span> <span class="n">imagePath</span><span class="o">.</span><span class="n">deletingExtension</span>
<span class="k">let</span> <span class="nv">imagePathWithoutLastComponent</span> <span class="o">=</span> <span class="n">imagePath</span><span class="o">.</span><span class="n">deletingLastComponent</span>

<span class="n">absolutePath</span><span class="o">.</span><span class="n">exists</span>
<span class="n">absolutePath</span><span class="o">.</span><span class="n">isFile</span>
<span class="n">absolutePath</span><span class="o">.</span><span class="n">isDirectory</span>
<span class="n">absolutePath</span><span class="o">.</span><span class="n">isDeletable</span>
<span class="n">absolutePath</span><span class="o">.</span><span class="n">isExecutable</span>
<span class="n">absolutePath</span><span class="o">.</span><span class="n">isReadable</span>
<span class="n">absolutePath</span><span class="o">.</span><span class="n">isWritable</span>

<span class="c1">// Return an array of Path objects representing files in the current directory.</span>
<span class="k">let</span> <span class="nv">filesInDirectory</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">Path</span><span class="o">.</span><span class="n">currentDirectory</span><span class="o">.</span><span class="n">contentsOfDirectory</span>

<span class="c1">// Change directory to the user's home directory</span>
<span class="kt">Path</span><span class="o">.</span><span class="n">homeDirectory</span><span class="p">?</span><span class="o">.</span><span class="nf">becomeCurrentDirectory</span><span class="p">()</span>

<span class="k">if</span> <span class="k">let</span> <span class="nv">desktop</span> <span class="o">=</span> <span class="kt">Path</span><span class="o">.</span><span class="n">desktopDirectory</span> <span class="p">{</span>
    <span class="kt">Path</span><span class="p">(</span><span class="s">"/path/myfile.txt"</span><span class="p">)</span><span class="o">.</span><span class="nf">copy</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="n">desktop</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">desktop</span><span class="o">.</span><span class="nf">appendingComponent</span><span class="p">(</span><span class="s">"myfile.txt"</span><span class="p">)</span><span class="o">.</span><span class="nf">remove</span><span class="p">()</span>

<span class="nf">try</span> <span class="p">(</span><span class="n">desktop</span> <span class="o">+</span> <span class="s">"My Folder"</span><span class="p">)</span><span class="o">.</span><span class="nf">createDirectory</span><span class="p">()</span>

<span class="kt">Path</span><span class="p">(</span><span class="s">"/path/myscript.sh"</span><span class="p">)</span><span class="o">.</span><span class="nf">setPosixPermissions</span><span class="p">(</span><span class="mi">0</span><span class="n">o700</span><span class="p">)</span>
</code></pre>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2019 <a class="link" href="http://apparata.se" target="_blank" rel="external">Apparata</a>. All rights reserved. (Last updated: 2019-08-11)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.10.0</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
